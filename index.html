<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Таблица</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    body {
      background-color: aliceblue;
    }

    td, th {
      width: 100px; 
    }
    
    td {
      text-align: center;
      background-color: greenyellow;
    }
    
    .occupied {
      background-color: red;
    }
  </style>
  
</head>
<body>

  <table style="border: 4px; border-radius: 15px;" > 
    <tr>
      <th style=width: 150px>Время/Дорожки</th>
      <th>1</th>
      <th>2</th>  
      <th>3</th>
      <th>4</th>
      <th>5</th>
      <th>6</th>
      <th>7</th>  
      <th>8</th>
      <th>9</th>
      <th>10</th>
      <th>11</th>
      <th>12</th>
    </tr>
    <tr>
      <td>10:00 - 10:30</td>
      <td class="occupied" id="cell-1">X</td>  
      <td id="cell-2"></td>
      <td class="occupied" id="cell-3">X</td>
      <td class="occupied" id="cell-4">X</td>
      <td class="occupied" id="cell-5">X</td>
    </tr>
    <tr>
      <td>10:30 - 11:00</td>
      <td id="cell-6"></td>
      <td class="occupied" id="cell-7">X</td>
      <td class="occupied" id="cell-8">X</td>
      <td id="cell-9"></td>
      <td class="occupied" id="cell-10">X</td>
    </tr>
    <tr>
      <td>11:00 - 11:30</td>
      <td id="cell-11"></td>
      <td id="cell-12"></td>
      <td id="cell-13"></td>
      <td id="cell-14"></td>  
      <td class="occupied" id="cell-15">X</td>
    </tr>
    <tr>
      <td>11:30 - 12:00</td>
      <td id="cell-16"></td>
      <td class="occupied" id="cell-17">X</td>
      <td class="occupied" id="cell-18">X</td>
      <td id="cell-19"></td>
      <td class="occupied" id="cell-20">X</td> 
    </tr>
  </table>
  
  <div id="selected-cell">ПУСТО</div>
  
  <script>
    let tg = window.Telegram.WebApp; //получаем объект webapp телеграма 
    tg.expand(); //расширяем на все окно  

    window.onload = function() {

    let cells = document.querySelectorAll('td:not(.occupied)');
    let selectedCells = [];

    for(let cell of cells) {
      cell.addEventListener('click', function() {
      
        let cellId = this.id;
        
        if(this.style.backgroundColor == '') {
          this.style.backgroundColor = 'yellow';
          selectedCells.push(cellId);  
        } else {
          this.style.backgroundColor = '';
          selectedCells = selectedCells.filter(id => id !== cellId);
        }

        updateSelectedCells();
        
      });
    }

    function updateSelectedCells() {
      
      let selectedCellDiv = document.getElementById('selected-cells');
      if(!selectedCellDiv) {
        return;  
      }
      
      let cellIds = selectedCells.join(', '); 
      selectedCellDiv.innerHTML = cellIds;
      
    }

    }
  </script>

</body>
</html>